#include <SPI.h>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64

#define OLED_RESET -1
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

unsigned char oci_otvorene[][2] = {{21,21},{21,22},{21,23},{21,24},{21,25},{21,26},{21,27},{22,17},{22,18},{22,19},{22,20},{22,21},{22,22},{22,23},{22,24},{22,25},{22,26},{22,27},{22,28},{23,17},{23,18},{23,19},{23,20},{23,27},{23,28},{23,29},{24,15},{24,16},{24,17},{24,28},{24,29},{24,30},{25,14},{25,15},{25,16},{25,17},{25,29},{25,30},{26,14},{26,15},{26,29},{26,30},{27,13},{27,14},{27,15},{27,29},{27,30},{28,11},{28,12},{28,13},{28,14},{28,29},{28,30},{29,11},{29,12},{29,29},{29,30},{30,11},{30,12},{30,13},{30,29},{30,30},{31,11},{31,12},{31,13},{31,29},{31,30},{32,12},{32,13},{32,29},{32,30},{33,13},{33,14},{33,28},{33,29},{33,30},{34,13},{34,14},{34,27},{34,28},{34,29},{35,14},{35,15},{35,26},{35,27},{35,28},{36,14},{36,15},{36,16},{36,23},{36,24},{36,25},{36,26},{36,27},{37,15},{37,16},{37,17},{37,22},{37,23},{37,24},{37,25},{38,16},{38,17},{38,18},{38,19},{38,20},{38,21},{38,22},{38,23},{39,18},{39,19},{39,20},{39,21},{39,22},{66,20},{66,21},{66,22},{66,23},{66,24},{66,25},{66,26},{67,19},{67,20},{67,21},{67,22},{67,23},{67,24},{67,25},{67,26},{67,27},{67,28},{68,16},{68,17},{68,18},{68,19},{68,27},{68,28},{68,29},{69,15},{69,16},{69,17},{69,18},{69,28},{69,29},{70,15},{70,16},{70,28},{70,29},{71,14},{71,15},{71,16},{71,28},{71,29},{72,14},{72,15},{72,28},{72,29},{73,14},{73,15},{73,28},{73,29},{74,14},{74,15},{74,27},{74,28},{74,29},{75,14},{75,15},{75,26},{75,27},{75,28},{76,13},{76,14},{76,15},{76,26},{76,27},{77,13},{77,14},{77,15},{77,16},{77,25},{77,26},{77,27},{78,13},{78,14},{78,15},{78,16},{78,25},{78,26},{79,13},{79,14},{79,16},{79,17},{79,24},{79,25},{79,26},{80,16},{80,17},{80,23},{80,24},{80,25},{81,16},{81,17},{81,22},{81,23},{81,24},{82,16},{82,17},{82,22},{82,23},{83,16},{83,17},{83,22},{83,23},{84,16},{84,17},{84,18},{84,19},{84,20},{84,21},{84,22},{85,17},{85,18},{85,19},{85,20},{85,21}};
unsigned char oci_zatvorene[][2] = {{20,19},{20,20},{20,21},{20,22},{20,23},{20,24},{20,25},{20,26},{20,27},{21,19},{21,20},{21,21},{21,22},{21,23},{21,24},{21,25},{21,26},{21,27},{21,28},{22,17},{22,18},{22,19},{22,20},{22,21},{22,22},{22,23},{22,24},{22,25},{22,26},{22,27},{22,28},{22,29},{23,17},{23,18},{23,19},{23,20},{23,21},{23,22},{23,23},{23,24},{23,25},{23,26},{23,27},{23,28},{23,29},{24,15},{24,16},{24,17},{24,18},{24,19},{24,20},{24,21},{24,22},{24,23},{24,24},{24,25},{24,26},{24,27},{24,28},{24,29},{24,30},{25,14},{25,15},{25,16},{25,17},{25,18},{25,19},{25,20},{25,21},{25,22},{25,23},{25,24},{25,25},{25,26},{25,27},{25,29},{25,30},{26,14},{26,15},{26,16},{26,17},{26,18},{26,19},{26,20},{26,21},{26,22},{26,23},{26,24},{26,25},{26,26},{26,27},{26,28},{26,29},{26,30},{27,13},{27,14},{27,15},{27,16},{27,17},{27,18},{27,19},{27,20},{27,21},{27,22},{27,23},{27,24},{27,25},{27,26},{27,27},{27,28},{27,29},{27,30},{28,11},{28,12},{28,13},{28,14},{28,15},{28,16},{28,17},{28,18},{28,19},{28,20},{28,21},{28,22},{28,23},{28,24},{28,25},{28,26},{28,27},{28,28},{28,29},{28,30},{29,11},{29,12},{29,13},{29,14},{29,15},{29,16},{29,17},{29,18},{29,19},{29,20},{29,21},{29,22},{29,23},{29,24},{29,25},{29,26},{29,27},{29,28},{29,29},{29,30},{30,11},{30,12},{30,13},{30,14},{30,15},{30,16},{30,17},{30,18},{30,19},{30,20},{30,21},{30,22},{30,23},{30,24},{30,25},{30,26},{30,27},{30,29},{30,30},{31,11},{31,12},{31,13},{31,14},{31,15},{31,16},{31,17},{31,18},{31,19},{31,20},{31,21},{31,22},{31,23},{31,24},{31,25},{31,26},{31,27},{31,28},{31,29},{31,30},{32,12},{32,13},{32,14},{32,15},{32,16},{32,17},{32,18},{32,19},{32,20},{32,21},{32,22},{32,23},{32,24},{32,25},{32,26},{32,27},{32,28},{32,29},{32,30},{33,13},{33,14},{33,15},{33,16},{33,17},{33,18},{33,19},{33,20},{33,21},{33,22},{33,23},{33,24},{33,25},{33,26},{33,27},{33,28},{33,29},{33,30},{34,13},{34,14},{34,15},{34,16},{34,17},{34,18},{34,19},{34,20},{34,21},{34,22},{34,23},{34,24},{34,25},{34,27},{34,28},{34,29},{35,14},{35,15},{35,16},{35,17},{35,18},{35,19},{35,20},{35,21},{35,22},{35,23},{35,24},{35,26},{35,27},{35,28},{36,14},{36,15},{36,16},{36,17},{36,18},{36,19},{36,20},{36,21},{36,22},{36,23},{36,24},{36,25},{36,26},{36,27},{37,15},{37,16},{37,17},{37,18},{37,19},{37,20},{37,22},{37,23},{37,24},{37,25},{38,16},{38,17},{38,18},{38,19},{38,20},{38,21},{38,22},{38,23},{39,18},{39,19},{39,20},{39,21},{39,22},{64,23},{64,24},{64,25},{64,26},{65,22},{65,23},{65,24},{65,25},{65,26},{65,27},{65,30},{65,31},{66,20},{66,21},{66,22},{66,23},{66,24},{66,25},{66,26},{66,27},{66,30},{66,31},{67,19},{67,20},{67,21},{67,22},{67,23},{67,24},{67,25},{67,26},{67,27},{67,28},{67,29},{67,30},{68,16},{68,17},{68,18},{68,19},{68,20},{68,21},{68,22},{68,23},{68,24},{68,25},{68,26},{68,27},{68,28},{68,29},{69,15},{69,16},{69,17},{69,18},{69,19},{69,20},{69,21},{69,22},{69,23},{69,24},{69,26},{69,27},{69,28},{69,29},{70,15},{70,16},{70,17},{70,18},{70,19},{70,20},{70,21},{70,22},{70,23},{70,24},{70,25},{70,26},{70,27},{70,28},{70,29},{71,14},{71,15},{71,16},{71,17},{71,18},{71,19},{71,20},{71,21},{71,22},{71,23},{71,24},{71,25},{71,26},{71,27},{71,28},{71,29},{72,14},{72,15},{72,17},{72,18},{72,19},{72,20},{72,21},{72,22},{72,23},{72,24},{72,25},{72,26},{72,27},{72,28},{72,29},{72,30},{73,14},{73,15},{73,17},{73,18},{73,19},{73,20},{73,21},{73,22},{73,23},{73,24},{73,25},{73,26},{73,27},{73,28},{73,29},{74,14},{74,15},{74,16},{74,17},{74,18},{74,19},{74,20},{74,21},{74,22},{74,23},{74,24},{74,25},{74,26},{74,27},{74,28},{74,29},{75,14},{75,15},{75,16},{75,17},{75,18},{75,19},{75,20},{75,21},{75,22},{75,23},{75,24},{75,25},{75,26},{75,27},{75,28},{76,13},{76,14},{76,15},{76,16},{76,17},{76,18},{76,19},{76,20},{76,21},{76,22},{76,23},{76,24},{76,25},{76,26},{76,27},{77,13},{77,14},{77,15},{77,16},{77,17},{77,18},{77,19},{77,20},{77,21},{77,22},{77,23},{77,24},{77,25},{77,26},{77,27},{78,13},{78,14},{78,15},{78,16},{78,17},{78,18},{78,19},{78,20},{78,21},{78,22},{78,23},{78,24},{78,25},{78,26},{78,27},{79,13},{79,14},{79,15},{79,16},{79,17},{79,18},{79,19},{79,20},{79,21},{79,22},{79,23},{79,24},{79,25},{79,26},{80,13},{80,14},{80,15},{80,16},{80,17},{80,18},{80,19},{80,20},{80,21},{80,22},{80,23},{80,24},{80,25},{81,13},{81,14},{81,15},{81,16},{81,17},{81,18},{81,19},{81,20},{81,21},{81,22},{81,23},{81,24},{82,14},{82,15},{82,16},{82,17},{82,18},{82,19},{82,20},{82,21},{82,22},{82,23},{83,16},{83,17},{83,18},{83,19},{83,20},{83,22},{83,23},{84,16},{84,17},{84,18},{84,19},{84,20},{84,21},{84,22},{85,16},{85,17},{85,18},{85,19},{85,20},{85,21},{86,16},{86,17},{86,18},{86,19},{87,16},{87,17},{87,18},{87,19},{88,17},{88,18}};

unsigned char usta[][2] = {{29,42},{29,43},{30,42},{30,43},{31,42},{31,43},{31,44},{32,43},{32,44},{32,45},{32,46},{33,44},{33,45},{33,46},{33,47},{34,46},{34,47},{35,46},{35,47},{35,48},{36,47},{36,48},{36,49},{37,48},{37,49},{38,48},{38,49},{38,50},{39,49},{39,50},{40,50},{40,51},{41,50},{41,51},{42,50},{42,51},{43,50},{43,51},{44,51},{44,52},{45,51},{45,52},{46,51},{46,52},{47,51},{47,52},{47,53},{48,52},{48,53},{49,52},{49,53},{50,52},{50,53},{51,52},{51,53},{52,52},{52,53},{53,52},{53,53},{54,52},{54,53},{55,52},{55,53},{55,54},{56,53},{56,54},{57,54},{57,55},{58,54},{58,55},{59,54},{59,55},{60,54},{60,55},{61,54},{61,55},{62,54},{62,55},{63,54},{63,55},{64,54},{64,55},{65,54},{65,55},{66,54},{66,55},{67,54},{67,55},{68,53},{68,54},{68,55},{69,53},{69,54},{70,53},{70,54},{71,52},{71,53},{71,54},{72,51},{72,52},{72,53},{73,51},{73,52},{74,50},{74,51},{75,50},{75,51},{76,48},{76,49},{76,50},{76,51},{77,48},{77,49},{78,47},{78,48},{78,49},{79,47},{79,48},{80,46},{80,47},{80,48},{81,46},{81,47},{82,46},{82,47},{83,45},{83,46},{84,43},{84,44},{84,45},{84,46},{85,42},{85,43},{85,44},{86,42},{86,43},{87,42},{87,43},{88,41},{88,42},{89,41},{89,42}};,{54,14},{54,15},{54,32},{54,33},{54,49},{54,50},{55,14},{55,15},{55,32},{55,33},{55,49},{55,50},{56,14},{56,15},{56,32},{56,33},{56,49},{56,50},{57,14},{57,15},{57,32},{57,33},{57,49},{57,50},{58,14},{58,15},{58,32},{58,33},{58,49},{58,50},{59,14},{59,15},{59,32},{59,33},{59,49},{59,50},{60,14},{60,15},{60,32},{60,33},{60,49},{60,50},{61,15},{61,16},{61,17},{61,32},{61,33},{61,49},{61,50},{62,16},{62,17},{62,18},{62,31},{62,32},{62,49},{62,50},{63,17},{63,18},{63,31},{63,32},{63,49},{63,50},{64,18},{64,19},{64,27},{64,28},{64,29},{64,30},{64,31},{64,49},{64,50},{65,18},{65,19},{65,20},{65,21},{65,22},{65,23},{65,24},{65,25},{65,26},{65,27},{65,28},{65,29},{65,30},{65,49},{65,50},{66,19},{66,20},{66,21},{66,22},{66,23},{66,24},{66,25},{66,26},{66,27},{66,48},{66,49},{66,50},{67,47},{67,48},{67,49},{68,47},{68,48},{69,46},{69,47},{69,48},{70,46},{70,47},{71,46},{71,47},{72,46},{72,47},{72,48},{72,49},{73,47},{73,48},{73,49},{73,50},{74,49},{74,50},{74,51},{75,50},{75,51},{76,50},{76,51},{77,50},{77,51},{78,50},{78,51},{79,50},{79,51},{80,50},{80,51},{81,50},{81,51},{82,19},{82,20},{82,21},{82,22},{82,50},{82,51},{83,18},{83,19},{83,20},{83,21},{83,22},{83,50},{83,51},{84,16},{84,17},{84,18},{84,19},{84,50},{84,51},{85,14},{85,15},{85,16},{85,17},{85,19},{85,20},{85,21},{85,22},{85,50},{85,51},{86,14},{86,15},{86,18},{86,19},{86,20},{86,21},{86,22},{86,23},{86,50},{86,51},{87,14},{87,15},{87,18},{87,19},{87,22},{87,23},{87,24},{87,25},{87,50},{87,51},{88,14},{88,15},{88,18},{88,19},{88,23},{88,24},{88,25},{88,26},{88,50},{88,51},{89,13},{89,14},{89,25},{89,26},{89,27},{89,50},{89,51},{90,13},{90,14},{90,26},{90,27},{90,50},{90,51},{91,13},{91,14},{91,26},{91,27},{91,50},{91,51},{92,13},{92,14},{92,27},{92,28},{92,29},{92,50},{92,51},{93,13},{93,14},{93,27},{93,28},{93,29},{93,30},{93,31},{93,50},{93,51},{94,13},{94,14},{94,30},{94,31},{94,50},{94,51},{95,13},{95,14},{95,30},{95,31},{95,50},{95,51},{96,13},{96,14},{96,30},{96,31},{96,32},{96,49},{96,50},{97,13},{97,14},{97,31},{97,32},{97,33},{97,48},{97,49},{97,50},{98,13},{98,14},{98,32},{98,33},{98,34},{98,47},{98,48},{98,49},{99,13},{99,14},{99,33},{99,34},{99,47},{99,48},{100,13},{100,14},{100,33},{100,34},{100,35},{100,46},{100,47},{100,48},{101,14},{101,15},{101,34},{101,35},{101,47},{102,14},{102,15},{102,34},{102,35},{103,14},{103,15},{103,34},{103,35},{104,14},{104,15},{104,34},{104,35},{105,14},{105,15},{105,34},{105,35},{106,14},{106,15},{106,34},{106,35},{107,14},{107,15},{107,34},{107,35},{108,14},{108,15},{108,16},{108,33},{108,34},{108,35},{109,15},{109,16},{109,17},{109,18},{109,32},{109,33},{109,34},{110,16},{110,17},{110,18},{110,19},{110,30},{110,31},{110,32},{110,33},{111,18},{111,19},{111,28},{111,29},{111,30},{111,31},{111,32},{112,18},{112,19},{112,20},{112,21},{112,22},{112,23},{112,24},{112,25},{112,26},{112,27},{112,28},{112,29},{112,30},{113,20},{113,21},{113,22},{113,23},{113,24},{113,25},{113,26},{113,27}};

void setup(){
  Serial.begin(115200);

  // SSD1306_SWITCHCAPVCC = generate display voltage from 3.3V internally
  if(!display.begin(SSD1306_SWITCHCAPVCC, 0x3C)) { 
    Serial.println(F("SSD1306 allocation failed"));
    for(;;); // Don't proceed, loop forever
  } else {
    Serial.println("allocated");
  }

  display.clearDisplay();

  display.display();
}

bool trep = false;

void loop() {
  trep = !trep;

  int len_oci_zatvorene = sizeof(oci_otvorene) / sizeof(oci_otvorene[0]);
  int len_oci_otvorene = sizeof(oci_zatvorene) / sizeof(oci_zatvorene[0]);
  int len_usta = sizeof(usta) / sizeof(usta[0]);

  display.clearDisplay();

  for (int i = 0; i < len_usta; ++i) {
    display.drawPixel(usta[i][0], usta[i][1], WHITE);  
  }

  if (trep) {
    for (int i = 0; i < len_oci_zatvorene; ++i) {
      display.drawPixel(oci_zatvorene[i][0], oci_zatvorene[i][1], WHITE);  
    }  
  } else {
    for (int i = 0; i < len_oci_otvorene; ++i) {
      display.drawPixel(oci_otvorene[i][0], oci_otvorene[i][1], WHITE);  
    }
  }

  display.display();

  delay(500);
}
